{"ast":null,"code":"import _asyncToGenerator from\"/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';// SERVICES\nimport loginService from'../services/login';import blogService from'../services/blogs';// REDUCERS\nimport{setTheUser}from'../reducers/userReducer';import{timedError}from'../reducers/errorReducer';import ErrorMessage from'./ErrorMessage';import ValidMessage from'./ValidMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var dispatch=useDispatch();var navigate=useNavigate();var user=useSelector(function(state){return state.user;});useEffect(function(){if(user){navigate('/');}},[]);var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return loginService.login({username:username,password:password});case 4:_user=_context.sent;window.localStorage.setItem('loggedBlogappUser',JSON.stringify(_user));blogService.setToken(_user.token);dispatch(setTheUser(_user));setUsername('');setPassword('');_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);dispatch(timedError('Wrong Credentials'));setUsername('');setPassword('');case 17:navigate('/');case 18:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col justify-center items-center h-screen font-mono bg-white dark:bg-slate-900\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"h-96\",children:[/*#__PURE__*/_jsx(ErrorMessage,{}),/*#__PURE__*/_jsx(ValidMessage,{}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl text-slate-700 dark:text-slate-200\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"mb-2 text-slate-700 dark:text-slate-200\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{id:\"username\",type:\"text\",value:username,name:\"Username\",autoComplete:\"off\",onChange:function onChange(_ref2){var target=_ref2.target;return setUsername(target.value);},className:\"font-mono w-72 h-6 p-1 pl-3 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:transition-all hover:shadow-md focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500 dark:bg-slate-900 dark:text-slate-200\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mb-6 \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"mb-2 text-slate-700 dark:text-slate-200\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",value:password,name:\"Password\",onChange:function onChange(_ref3){var target=_ref3.target;return setPassword(target.value);},className:\"font-mono w-72 h-6 p-1 pl-3 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:transition-all hover:shadow-md focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500 dark:bg-slate-900 dark:text-slate-200\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"font-mono p-2 w-32 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-white dark:bg-slate-900\",children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return navigate('/signup');},className:\"font-mono p-2 w-32 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-white dark:bg-slate-900\",children:\"Sign up\"})]})]})]})});};// LoginForm.propTypes = {\n//   handleLogin: PropTypes.func.isRequired,\n//   username: PropTypes.string.isRequired,\n//   setUsername: PropTypes.func.isRequired,\n//   password: PropTypes.string.isRequired,\n//   setPassword: PropTypes.func.isRequired,\n// }\nexport default LoginForm;","map":{"version":3,"sources":["/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/src/components/LoginForm.js"],"names":["React","useState","useEffect","useDispatch","useSelector","useNavigate","loginService","blogService","setTheUser","timedError","ErrorMessage","ValidMessage","LoginForm","username","setUsername","password","setPassword","dispatch","navigate","user","state","handleLogin","event","preventDefault","login","window","localStorage","setItem","JSON","stringify","setToken","token","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useNavigate } from 'react-router-dom'\n\n// SERVICES\nimport loginService from '../services/login'\nimport blogService from '../services/blogs'\n\n// REDUCERS\nimport { setTheUser } from '../reducers/userReducer'\nimport { timedError } from '../reducers/errorReducer'\nimport ErrorMessage from './ErrorMessage'\nimport ValidMessage from './ValidMessage'\n\n\nconst LoginForm = () => {\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const dispatch = useDispatch()\n  const navigate = useNavigate()\n  const user = useSelector(state => state.user)\n\n  useEffect(() => {\n    if (user) {\n      navigate('/')\n    }\n\n  }, [])\n    \n  \n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password\n      })\n      window.localStorage.setItem(\n        'loggedBlogappUser', JSON.stringify(user)\n      )\n      blogService.setToken(user.token)\n      dispatch(setTheUser(user))\n      setUsername('')\n      setPassword('')\n\n    } catch (exception) {\n      dispatch(timedError('Wrong Credentials'))\n      setUsername('')\n      setPassword('')\n    }\n    navigate('/')\n  }\n\n\n  return (\n    <div className='flex flex-col justify-center items-center h-screen font-mono bg-white dark:bg-slate-900'>\n      <div className='h-96'>\n        <ErrorMessage/>\n        <ValidMessage/>\n        <h2 className='text-4xl text-slate-700 dark:text-slate-200'>Login</h2>\n        <form onSubmit={handleLogin} className='flex flex-col'>\n          <div className='flex flex-col mb-6'>\n            <label className='mb-2 text-slate-700 dark:text-slate-200'>Username</label>\n            <input\n              id='username'\n              type=\"text\"\n              value={username}\n              name=\"Username\"\n              autoComplete='off'\n              onChange={({ target }) => setUsername(target.value)}\n              className='font-mono w-72 h-6 p-1 pl-3 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:transition-all hover:shadow-md focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600\n              focus:invalid:border-pink-500 focus:invalid:ring-pink-500 dark:bg-slate-900 dark:text-slate-200'\n            />\n          </div>\n          <div className='flex flex-col mb-6 '>\n          <label className='mb-2 text-slate-700 dark:text-slate-200'>Password</label>\n            <input\n              id='password'\n              type=\"password\"\n              value={password}\n              name=\"Password\"\n              onChange={({ target }) => setPassword(target.value)}\n              className='font-mono w-72 h-6 p-1 pl-3 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:transition-all hover:shadow-md focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600\n              focus:invalid:border-pink-500 focus:invalid:ring-pink-500 dark:bg-slate-900 dark:text-slate-200'\n            />\n          </div>\n          <div className='flex justify-between'>\n            <button type=\"submit\" className='font-mono p-2 w-32 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-white dark:bg-slate-900'>Login</button>\n            <button type=\"button\" onClick={() => navigate('/signup')} className='font-mono p-2 w-32 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-white dark:bg-slate-900'>Sign up</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n\n// LoginForm.propTypes = {\n//   handleLogin: PropTypes.func.isRequired,\n//   username: PropTypes.string.isRequired,\n//   setUsername: PropTypes.func.isRequired,\n//   password: PropTypes.string.isRequired,\n//   setPassword: PropTypes.func.isRequired,\n// }\n\nexport default LoginForm\n"]},"metadata":{},"sourceType":"module"}