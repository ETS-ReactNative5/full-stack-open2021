{"ast":null,"code":"import _asyncToGenerator from\"/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/node_modules/@babel/runtime/regenerator/index.js\";import{useEffect}from'react';import'./index.css';// Redux implementation\nimport{useDispatch,useSelector}from'react-redux';import{initializeBlogs}from'./reducers/blogsReducer';import{setTheUser}from'./reducers/userReducer';import{addAllUsers}from'./reducers/usersReducer';// Router Implementation\nimport{Routes,Route,Link,useMatch,Navigate}from'react-router-dom';// SERVICES\nimport userService from'./services/users';// COMPONENTS\nimport Home from'./components/Home';import Users from'./components/Users';import UserBlogs from'./components/UserBlogs';import LoginForm from'./components/LoginForm';import Blog from'./components/Blog';import SignUpForm from'./components/SignupForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var dispatch=useDispatch();useEffect(function(){var loggedUserJSON=window.localStorage.getItem('loggedBlogappUser');if(loggedUserJSON){var _user=JSON.parse(loggedUserJSON);dispatch(setTheUser(_user));}},[]);useEffect(function(){dispatch(initializeBlogs());},[dispatch]);useEffect(function(){var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var allUsers;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return userService.getAllUsers();case 2:allUsers=_context.sent;dispatch(addAllUsers(allUsers));case 4:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref.apply(this,arguments);};}();getUsers();},[]);var clearLocStor=function clearLocStor(event){event.preventDefault();window.localStorage.clear();dispatch(setTheUser(null));};var user=useSelector(function(state){return state.user;});var users=useSelector(function(state){return state.users;});var blogs=useSelector(function(state){return state.blogs;});var uMatch=useMatch('/users/:id');var userMatch=uMatch?users.find(function(u){return u.id===uMatch.params.id;}):null;var bMatch=useMatch('blogs/:id');var blogMatch=bMatch?blogs.find(function(b){return b.id===bMatch.params.id;}):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"dark:bg-slate-900 w-screen h-screen\",children:[user&&/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between space-x-6\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"no-underline visited:text-slate-700 dark:visited:text-slate-200 hover:underline hover:decoration-slate-900 dark:hover:decoration-slate-200 \",children:\"Blogs\"}),/*#__PURE__*/_jsx(Link,{to:\"/users\",className:\"no-underline visited:text-slate-700 dark:visited:text-slate-200 hover:underline hover:decoration-slate-900 dark:hover:decoration-slate-200\",children:\"Users\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-6 items-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-slate-700 dark:text-slate-200\",children:[\"'\",user.name,\"' logged in\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:clearLocStor,className:\"font-mono text-slate-700 p-2 w-28 h-10 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-slate-200 dark:bg-slate-900\",children:\"Logout\"})]})]})}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:user===null?/*#__PURE__*/_jsx(Navigate,{to:\"/login\"}):/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/users\",element:/*#__PURE__*/_jsx(Users,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginForm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUpForm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/users/:id\",element:/*#__PURE__*/_jsx(UserBlogs,{user:userMatch})}),/*#__PURE__*/_jsx(Route,{path:\"/blogs/:id\",element:/*#__PURE__*/_jsx(Blog,{blog:blogMatch})})]})]});};export default App;","map":{"version":3,"sources":["/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/src/App.js"],"names":["useEffect","useDispatch","useSelector","initializeBlogs","setTheUser","addAllUsers","Routes","Route","Link","useMatch","Navigate","userService","Home","Users","UserBlogs","LoginForm","Blog","SignUpForm","App","dispatch","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","getUsers","getAllUsers","allUsers","clearLocStor","event","preventDefault","clear","state","users","blogs","uMatch","userMatch","find","u","id","params","bMatch","blogMatch","b","name"],"mappings":"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","sourcesContent":["import { useEffect } from 'react'\nimport './index.css'\n\n// Redux implementation\nimport { useDispatch, useSelector } from 'react-redux'\nimport { initializeBlogs } from './reducers/blogsReducer'\nimport { setTheUser } from './reducers/userReducer'\nimport { addAllUsers } from './reducers/usersReducer'\n\n// Router Implementation\nimport {\n  Routes, Route, Link, useMatch, Navigate\n} from 'react-router-dom'\n\n// SERVICES\nimport userService from './services/users'\n\n// COMPONENTS\nimport Home from './components/Home'\nimport Users from './components/Users'\nimport UserBlogs from './components/UserBlogs'\nimport LoginForm from './components/LoginForm'\nimport Blog from './components/Blog'\nimport SignUpForm from './components/SignupForm'\n\n\nconst App = () => {\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      dispatch(setTheUser(user))\n    }\n  }, [])\n\n  useEffect(() => {\n    dispatch(initializeBlogs())\n  }, [dispatch])\n\n  useEffect(() => {\n    const getUsers = async () => {\n      const allUsers = await userService.getAllUsers()\n      dispatch(addAllUsers(allUsers))\n    }\n    getUsers()\n  }, [])\n\n  const clearLocStor = (event) => {\n    event.preventDefault()\n    window.localStorage.clear()\n    dispatch(setTheUser(null))\n  }\n  \n  const user = useSelector(state => state.user)\n  const users = useSelector(state => state.users)\n  const blogs = useSelector(state => state.blogs)\n\n  const uMatch = useMatch('/users/:id')\n  const userMatch = uMatch\n      ? users.find(u => u.id === uMatch.params.id)\n      : null\n\n  const bMatch = useMatch('blogs/:id')\n  const blogMatch = bMatch\n      ? blogs.find(b => b.id === bMatch.params.id)\n      : null\n\n\n  return (\n    <div className='dark:bg-slate-900 w-screen h-screen'>\n    {\n      user\n      && <div className='container mx-auto'>\n          <div className='flex items-center justify-between'>\n            <div className='flex items-center justify-between space-x-6'>\n              <Link to='/' className='no-underline visited:text-slate-700 dark:visited:text-slate-200 hover:underline hover:decoration-slate-900 dark:hover:decoration-slate-200 '>\n                Blogs\n              </Link>\n              <Link to='/users' className='no-underline visited:text-slate-700 dark:visited:text-slate-200 hover:underline hover:decoration-slate-900 dark:hover:decoration-slate-200'>\n                Users\n              </Link>\n            </div>\n            <div className='flex space-x-6 items-center'>\n              <p className='text-slate-700 dark:text-slate-200'>'{user.name}' logged in</p>\n              <button onClick={clearLocStor} className='font-mono text-slate-700 p-2 w-28 h-10 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-slate-200 dark:bg-slate-900'>Logout</button>\n            </div>\n          </div>\n        </div>\n    }\n      <Routes>\n        <Route path='/' element={\n          user === null ? <Navigate to='/login' /> : <Home />\n          }/>\n        <Route path='/users' element={<Users />} />\n        <Route path='/login' element={<LoginForm />} />\n        <Route path='/signup' element={<SignUpForm />} />\n        <Route path='/users/:id' element={<UserBlogs user={userMatch} />} />\n        <Route path='/blogs/:id' element={<Blog blog={blogMatch} />} />\n      </Routes>\n\n    </div>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}