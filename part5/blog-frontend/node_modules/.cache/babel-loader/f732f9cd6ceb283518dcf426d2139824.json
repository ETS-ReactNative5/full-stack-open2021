{"ast":null,"code":"import _toConsumableArray from\"/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import jwt_decode from'jwt-decode';import{useDispatch,useSelector}from'react-redux';import{addAComment,updateBlogLike}from'../reducers/blogsReducer';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Blog=function Blog(_ref){var blog=_ref.blog;var dispatch=useDispatch();var user=useSelector(function(state){return state.user;});var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),comment=_useState2[0],setComment=_useState2[1];if(!blog){return null;}var token_decoded;if(user){token_decoded=jwt_decode(user.token);}else{token_decoded=null;}var like=function like(event){event.preventDefault();var newBlog={user:user?token_decoded.id:null,likes:blog.likes+1,author:blog.author,title:blog.title,url:blog.url,comments:blog.comments};dispatch(updateBlogLike(newBlog,blog.id));};var generateId=function generateId(){return Math.random();};var handleChange=function handleChange(event){setComment(event.target.value);};var handleComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var newPost;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();newPost=_objectSpread(_objectSpread({},blog),{},{comments:[].concat(_toConsumableArray(blog.comments),[comment])});dispatch(addAComment(newPost,blog.id));setComment('');case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleComment(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate('/');},className:\"font-mono text-center text-slate-700 p-2 w-20 h-9 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-slate-200 dark:bg-slate-900 mt-2\",children:\"Back\"}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-slate-700 dark:text-slate-200\",children:[blog.title,\" \",blog.author]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-slate-700 dark:text-slate-200 italic mb-3\",children:[\"Added by: \",blog.author]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-slate-700 mb-6 dark:text-slate-200\",children:blog.url})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-slate-700 dark:text-slate-200\",children:[blog.likes,\" likes \",/*#__PURE__*/_jsx(\"button\",{onClick:like,\"data-testid\":\"#like\",className:\"font-mono text-center text-slate-700 p-2 w-20 h-9 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-slate-200 dark:bg-slate-900\",children:\"Like\"})]})})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-slate-700 dark:text-slate-200\",children:\"Comments\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"comment\",value:comment,onChange:handleChange,placeholder:\"comment...\",autoComplete:\"off\",className:\"font-mono w-72 h-6 p-1 pl-3 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:transition-all hover:shadow-md focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500 dark:bg-slate-900 dark:text-slate-200 mr-6\"}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",onClick:handleComment,value:\"add comment\",className:\"font-mono text-center text-slate-700 p-2 w-32 h-9 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-slate-200 dark:bg-slate-900\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-none\",children:blog.comments.map(function(comment){return/*#__PURE__*/_jsx(\"li\",{className:\"text-slate-700 dark:text-slate-200 mb-5 mt-5\",children:comment},generateId());})})]})});};export default Blog;","map":{"version":3,"sources":["/Users/federico/CS Projects/full-stack-open2021/part5/blog-frontend/src/components/Blog.js"],"names":["React","useState","jwt_decode","useDispatch","useSelector","addAComment","updateBlogLike","useNavigate","Blog","blog","dispatch","user","state","navigate","comment","setComment","token_decoded","token","like","event","preventDefault","newBlog","id","likes","author","title","url","comments","generateId","Math","random","handleChange","target","value","handleComment","newPost","map"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport jwt_decode from 'jwt-decode'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { addAComment, updateBlogLike } from '../reducers/blogsReducer'\nimport { useNavigate } from 'react-router-dom'\n\nconst Blog = ({ blog }) => {\n  const dispatch = useDispatch()\n  const user = useSelector(state => state.user)\n  const navigate = useNavigate()\n  const [comment, setComment] = useState('')\n\n  if (!blog) {\n    return null\n  }\n  \n  let token_decoded\n  if (user) {\n    token_decoded = jwt_decode(user.token)\n  } else {\n    token_decoded = null\n  }\n\n  const like = (event) => {\n    event.preventDefault()\n    const newBlog = {\n      user: user ? token_decoded.id : null,\n      likes: blog.likes + 1,\n      author: blog.author,\n      title: blog.title,\n      url: blog.url,\n      comments: blog.comments\n    }\n\n    dispatch(updateBlogLike(newBlog, blog.id))\n  }\n\n  const generateId = () => {\n    return Math.random()\n  }\n\n  const handleChange = (event) => {\n    setComment(event.target.value)\n  }\n\n  const handleComment = async (event) => {\n    event.preventDefault()\n    const newPost = {\n      ...blog,\n      comments: [...blog.comments, comment]\n    }\n    dispatch(addAComment(newPost, blog.id))\n    setComment('')\n  }\n\n  return (\n    <div className='container mx-auto'>\n      <div>\n        <button onClick={() => navigate('/')} className='font-mono text-center text-slate-700 p-2 w-20 h-9 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-slate-200 dark:bg-slate-900 mt-2'>Back</button>\n        <h1 className='text-slate-700 dark:text-slate-200'>{blog.title} {blog.author}</h1>\n        <div className='flex items-center justify-between'>\n          <div>\n            <div className='text-slate-700 dark:text-slate-200 italic mb-3'>Added by: {blog.author}</div>\n            <div className='text-slate-700 mb-6 dark:text-slate-200'>{blog.url}</div>\n          </div>\n          <div>\n            <div className='text-slate-700 dark:text-slate-200'>{blog.likes} likes <button onClick={like} data-testid=\"#like\" className='font-mono text-center text-slate-700 p-2 w-20 h-9 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-slate-200 dark:bg-slate-900'>Like</button></div>\n          </div>\n        </div>\n          \n        <h3 className='text-slate-700 dark:text-slate-200'>Comments</h3>\n        <div>\n          <input \n            type='text' \n            name='comment'\n            value={comment}\n            onChange={handleChange}\n            placeholder='comment...'\n            autoComplete='off'\n            className='font-mono w-72 h-6 p-1 pl-3 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:transition-all hover:shadow-md focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 invalid:border-pink-500 invalid:text-pink-600\n            focus:invalid:border-pink-500 focus:invalid:ring-pink-500 dark:bg-slate-900 dark:text-slate-200 mr-6'\n            />\n          <input \n            type=\"button\" \n            onClick={handleComment}\n            value='add comment'\n            className='font-mono text-center text-slate-700 p-2 w-32 h-9 rounded-md border-solid border-blue-400/30 hover:border-blue-400 hover:shadow-md hover:transition-all dark:text-slate-200 dark:bg-slate-900'\n            />\n        </div>\n        <ul className='list-none'>\n          {blog.comments.map(comment => (\n            <li \n              key={generateId()}\n              className='text-slate-700 dark:text-slate-200 mb-5 mt-5'\n            >\n              {comment}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport default Blog"]},"metadata":{},"sourceType":"module"}